# Project: adams
# Date: 2014-03-13 13:29:54
# User: fracpete
#
adams.flow.control.Flow
	-annotation
	Converts ADAMS spreadsheet archive CSV files into a single CSV file that can be read by Weka.
	-actor
		adams.flow.standalone.SetVariable
			-name
			csv output file
			-var-name
			output_csv
			-var-value
			${TMP}/combined.csv
	-actor
		adams.flow.source.Start
	-actor
		adams.flow.control.Trigger
			-name
			convert csv
			-tee
				adams.flow.source.SelectFile
					-stop-if-canceled
					true
					-file-chooser-title
					Select CSV files to convert
					-extension
					csv
			-tee
				adams.flow.transformer.SetVariable
					-name
					input file
					-var-name
					input
			-tee
				adams.flow.control.Trigger
					-name
					convert
					-tee
						adams.flow.source.TweetReplay
							-replay
								adams.data.io.input.SpreadSheetConverterArchive
									-archive
									@{input}
					-tee
						adams.flow.transformer.TwitterConverter
							-converter
								adams.data.twitter.SpreadSheetConverter
									-field
									ID
									-field
									USER_ID
									-field
									USER_NAME
									-field
									SOURCE
									-field
									TEXT
									-field
									CREATED
									-field
									FAVORITED
									-field
									RETWEET
									-field
									RETWEET_COUNT
									-field
									RETWEET_BY_ME
									-field
									POSSIBLY_SENSITIVE
									-field
									GEO_LATITUDE
									-field
									GEO_LONGITUDE
									-field
									LANGUAGE_CODE
									-field
									PLACE
									-field
									PLACE_TYPE
									-field
									PLACE_URL
									-field
									STREET_ADDRESS
									-field
									COUNTRY
									-field
									COUNTRY_CODE
									-field
									IN_REPLY_TO_STATUS_ID
									-field
									IN_REPLY_TO_USER_ID
									-field
									RETWEETED_STATUS_ID
									-field
									RETWEETED_STATUS_USER_ID
									-field
									RETWEETED_STATUS_CREATED
									-field
									EXPANDED_URLS
									-spreadsheet-type
										adams.data.spreadsheet.SpreadSheet
					-tee
						adams.flow.sink.SpreadSheetFileWriter
							-output
							@{output_csv}
							-writer
								adams.data.io.output.CsvSpreadSheetWriter
									-missing
									?
									-output-comments
									false
									-appending
									true
									-quote-char
									'
									-escape-special-chars
									true
	-actor
		adams.flow.control.Trigger
			-name
			output csv filename
			-tee
				adams.flow.source.Variable
					-var-name
					output_csv
			-tee
				adams.flow.transformer.Convert
					-conversion
						adams.data.conversion.MultiConversion
							-conversion
								adams.data.conversion.StringToFile
									-placeholderfile
									true
							-conversion
								adams.data.conversion.FileToString
									-absolute
									true
			-tee
				adams.flow.sink.Display
					-name
					CSV file
					-short-title
					true
	-error-handling
	ACTORS_DECIDE_TO_STOP_ON_ERROR
	-flow-execution-listener
		adams.flow.execution.NullListener

